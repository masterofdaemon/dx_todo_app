/* Modal overlay and modal card */
.modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.35);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
}

.modal {
  background: #fff;
  border-radius: 12px;
  padding: 20px 24px;
  width: 360px;
  max-width: 90vw;
  box-shadow: 0 20px 60px rgba(0,0,0,0.25);
}

.modal .actions {
  margin-top: 16px;
  display: flex;
  gap: 8px;
}

/* Drag handle */
.drag-handle {
  width: 24px;
  height: 24px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  margin-right: 8px;
  cursor: grab;
  color: #7b8ab8;
}
.drag-handle:active { cursor: grabbing; }

.drag-handle svg {
  width: 16px;
  height: 16px;
}
/* Base: using dark theme; legacy dark styles */
:root{
  --bg: #0b1020;
  --bg-soft: #0f1630;
  --card: rgba(250, 252, 255, 0.08);
  --card-border: rgba(255,255,255,0.15);
  --text: #e8eef9;
  --muted: #9fb1d1;
  --accent1: #6ee7f0;
  --accent2: #7c6cf3;
  --danger: #ff6b6b;
  --success: #4ade80;
}
/* --- To-Do App Custom Styles --- */
.app {
    html, body { height: 100%; }
    body {
        margin: 0;
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, "Apple Color Emoji", "Segoe UI Emoji";
        color: #111827;
        background: radial-gradient(1000px 300px at 50% -150px, #eef2ff, rgba(255,255,255,0)) fixed, #f3f4f6;
    }
    .app {
        min-height: 100vh;
        padding: clamp(16px, 3vw, 40px);
    }
    .card {
        background: white;
        border-radius: 16px;
        box-shadow: 0 10px 25px rgba(0,0,0,0.08);
        padding: clamp(18px, 3vw, 28px);
        width: min(960px, 96vw);
        margin: 16px auto;
    }
    .header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 16px;
    }
    .title {
        font-size: 28px;
        font-weight: 800;
    }
    .meta {
        font-size: 12px;
        color: #6b7280;
    }

    .add {
        display: flex;
        gap: 8px;
        margin-bottom: 12px;
    }
    .text {
        flex: 1;
        border: 1px solid #e5e7eb;
        border-radius: 8px;
        padding: 10px 12px;
        font-size: 14px;
        outline: none;
    }
    .text:focus {
        border-color: #60a5fa;
        box-shadow: 0 0 0 3px rgba(96,165,250,0.3);
    }

    .btn {
        border: 1px solid #e5e7eb;
        border-radius: 8px;
        padding: 8px 12px;
        background: #ffffff;
        color: #111827;
        cursor: pointer;
        font-size: 14px;
    }
    .btn:hover { background: #f9fafb; }

    .btn-primary {
        background: #2563eb;
        color: #ffffff;
        border-color: #2563eb;
        box-shadow: 0 6px 12px rgba(37,99,235,0.2);
    }
    .btn-primary:hover { background: #1d4ed8; }

    .btn-success {
        background: #16a34a;
        color: #ffffff;
        border-color: #16a34a;
    }
    .btn-success:hover { background: #15803d; }

    .btn-danger {
        background: #ef4444;
        color: #ffffff;
        border-color: #ef4444;
    }
    .btn-danger:hover { background: #dc2626; }

    .btn-ghost {
        background: transparent;
    }
    .btn-ghost:hover { background: #f3f4f6; }

    .btn-link {
        background: transparent;
        border: none;
        color: #2563eb;
        padding: 4px 0;
    }
    .btn-link:hover { text-decoration: underline; }
    .btn-link.danger { color: #dc2626; }

    .filters { 
        display: flex; 
        align-items: center; 
        justify-content: space-between; 
        margin: 12px 0 16px; 
    }
    .tabs { 
        display: flex; 
        gap: 8px; 
    }
    .tabs {
        display: inline-flex;
    }
    @media (max-width: 480px) {
        .title { font-size: 26px; }
        .btn { padding: 8px 10px; }
        .btn-primary { padding: 8px 12px; }
        .filters { flex-direction: column; align-items: flex-start; gap: 10px; }
    }
    .tab {
        padding: 6px 10px;
        border: 1px solid #e5e7eb;
        border-radius: 8px;
        background: #ffffff;
        color: #111827;
        cursor: pointer;
    }
    .tab.active {
        background: #eff6ff;
        color: #1d4ed8;
        border-color: #93c5fd;
    }

    .list { 
        list-style: none; 
        padding: 0; 
        margin: 0; 
        max-height: calc(100vh - 260px); 
        overflow-y: auto; 
    }
    .list-item {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 10px 0;
        border-bottom: 1px solid #e5e7eb;
    }
    .list-item.editing {
        background: #f8fafc;
        border-radius: 8px;
        padding: 12px;
        border: 1px solid #e5e7eb;
        border-bottom: 0; /* avoid double divider while editing */
    }
    .content { flex: 1; }
    .actions { display: flex; gap: 8px; align-items: center; }
    .edit { width: 100%; }
    .item-title { font-size: 16px; font-weight: 600; color: #374151; }
    .item-title.completed { text-decoration: line-through; color: #9ca3af; }
    .list-item input[type="checkbox"] { margin-top: 4px; appearance: none; width:18px; height:18px; border-radius:6px; border:2px solid #7b8ab8; background: #eef2ff; display:grid; place-content:center; transition: all .15s ease; box-shadow: inset 0 1px 2px rgba(0,0,0,0.08); }
    .list-item input[type="checkbox"]:hover{ border-color: #5f73b8; background:#e6ebff; }
    .list-item input[type="checkbox"]:checked{ background: linear-gradient(135deg, var(--accent1), var(--accent2)); border-color: transparent; box-shadow: 0 6px 14px rgba(124,108,243,0.25); }
    .list-item input[type="checkbox"]:checked::after{ content:""; width:10px; height:10px; border-radius:3px; background:#0b1020; }
    .checkbox-spacer { width: 16px; height: 16px; margin-left: 2px; }
    /* Subtasks checkboxes: mirror main list style */
    .subtasks input[type="checkbox"] { appearance: none; width:18px; height:18px; border-radius:6px; border:2px solid #7b8ab8; background: #eef2ff; display:grid; place-content:center; transition: all .15s ease; box-shadow: inset 0 1px 2px rgba(0,0,0,0.08); margin-right: 8px; }
    .subtasks input[type="checkbox"]:hover{ border-color: #5f73b8; background:#e6ebff; }
    .subtasks input[type="checkbox"]:checked{ background: linear-gradient(135deg, var(--accent1), var(--accent2)); border-color: transparent; box-shadow: 0 6px 14px rgba(124,108,243,0.25); }
    .subtasks input[type="checkbox"]:checked::after{ content:""; width:10px; height:10px; border-radius:3px; background:#0b1020; }
    .list-item .text.edit {
        border-color: #d1d5db;
        background: #ffffff;
        height: 38px;
    }
    .list-item.editing .text.edit {
        box-shadow: 0 0 0 3px rgba(96,165,250,0.2);
    }
    .list-item .btn-success,
    .list-item .btn-ghost {
        padding: 8px 12px;
        height: 38px;
    }
    gap: 12px;
    padding: 10px 0;
    border-bottom: 1px solid #e5e7eb;
}
.list-item.editing {
    background: #f8fafc;
    border-radius: 8px;
    padding: 12px;
    border: 1px solid #e5e7eb;
    border-bottom: 0; /* avoid double divider while editing */
}
.content { flex: 1; }
.actions { display: flex; gap: 8px; align-items: center; }
.edit { width: 100%; }
.item-title { font-size: 16px; font-weight: 700; color: #0f172a; transition: color .2s ease, opacity .2s ease; }
.item-title.completed { text-decoration: line-through; color: #94a3b8; opacity: .9; }
.list-item input[type="checkbox"] { margin-top: 4px; }
.checkbox-spacer { width: 16px; height: 16px; margin-left: 2px; }
.list-item .text.edit {
    border-color: #d1d5db;
    background: #ffffff;
    height: 38px;
}
.list-item.editing .text.edit {
    box-shadow: 0 0 0 3px rgba(96,165,250,0.2);
}
.list-item .btn-success,
.list-item .btn-ghost {
    padding: 8px 12px;
    height: 38px;
}

/* --- Responsive Overrides (placed last to win the cascade) --- */
/* Normalize page background and typography */
body { margin:0; color: var(--text);
  background:
    radial-gradient(800px 400px at 10% -10%, rgba(124,108,243,0.35), transparent 60%),
    radial-gradient(700px 420px at 90% -20%, rgba(110,231,240,0.32), transparent 60%),
    linear-gradient(180deg, var(--bg) 0%, var(--bg-soft) 100%);
}

/* App shell and card scale nicely across window sizes */
.app { min-height: 100vh; padding: clamp(16px, 3vw, 40px); }
.card { width: min(960px, 96vw); margin: 16px auto; padding: clamp(18px, 3vw, 28px); border-radius: 16px; background: #fff; box-shadow: 0 10px 25px rgba(0,0,0,0.08); }

/* Header */
.header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px; }
.title { font-size: clamp(26px,4vw,34px); font-weight: 800; margin:0; color: var(--text); letter-spacing: .2px; }
.meta { color: var(--muted); font-size: 12px; }
.header::after{ content:""; display:block; height:3px; width:72px; margin-top:8px;
  background: linear-gradient(90deg, var(--accent1), var(--accent2)); border-radius: 999px; opacity:.9; }

/* Add form */
.add { display: flex; gap: 8px; margin-bottom: 12px; }
.text { flex:1; border:1px solid rgba(15,23,42,.12); border-radius: 12px; padding:12px 14px; font-size:14px; outline:none;
  background: #ffffff; color: #0f172a;
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.0);
}
.text.desc { flex: 0 0 auto; width: 100%; min-height: 60px; max-height: 120px; resize: vertical; }
.text::placeholder{ color: #94a3b8; }
.text:focus { border-color: rgba(110,231,240,0.8); box-shadow: 0 0 0 3px rgba(110,231,240,0.18); }

/* Buttons */
.btn { border:1px solid rgba(255,255,255,.16); border-radius: 12px; padding:10px 14px; background: rgba(255,255,255,0.06); color: var(--text); cursor:pointer; font-size:14px; }
.btn:hover { background: rgba(255,255,255,0.12); }
.btn-primary { background: linear-gradient(135deg, var(--accent1), var(--accent2)); color:#0b1020; border-color: transparent; box-shadow: 0 10px 22px rgba(110,231,240,0.25), 0 6px 18px rgba(124,108,243,0.22); }
.btn-primary:hover { filter: brightness(1.05); }
.btn-success { background: linear-gradient(135deg, #34d399, var(--success)); color:#05221a; border-color: transparent; box-shadow: 0 8px 18px rgba(52,211,153,0.25); }
.btn-success:hover { filter: brightness(1.05); }
.btn-danger { background: linear-gradient(135deg, #ff8b73, var(--danger)); color:#2b0a0a; border-color: transparent; box-shadow: 0 10px 20px rgba(255,107,107,0.25); }
.btn-danger:hover { filter: brightness(1.05); }
.btn-ghost { background: rgba(255,255,255,0.04); }
.btn-ghost:hover { background: rgba(255,255,255,0.08); }
.btn-link { background: transparent; border: none; color: var(--accent1); padding: 4px 0; }
.btn-link:hover { text-decoration: underline; }
.btn-link.danger { color: var(--danger); }

/* Filters */
.filters { display: flex; align-items: center; justify-content: space-between; margin: 12px 0 16px; }
.tabs { display: flex; gap: 8px; }
.tab { position: relative; padding: 8px 12px; border:1px solid rgba(255,255,255,.16); border-radius: 999px; background: rgba(255,255,255,0.06); color: var(--text); cursor: pointer; transition: background .2s ease, color .2s ease, border-color .2s ease, transform .15s ease; }
.tab:hover { transform: translateY(-1px); }
.tab.active { background: linear-gradient(135deg, var(--accent1), var(--accent2)); color: #0b1020; border-color: transparent; }
.tab.active::after { content: ""; position: absolute; left: 18px; right: 18px; bottom: -6px; height: 2px; border-radius: 2px; background: linear-gradient(90deg, var(--accent1), var(--accent2)); animation: underline-in 180ms ease-out both; }

/* List and items */
.list { list-style: none; padding: 0; margin: 0; max-height: calc(100vh - 260px); overflow-y: auto; scrollbar-width: thin; scrollbar-color: rgba(255,255,255,.25) transparent; }
.list::-webkit-scrollbar{ height: 10px; width: 10px; }
.list::-webkit-scrollbar-track{ background: transparent; }
.list::-webkit-scrollbar-thumb{ background: rgba(255,255,255,.18); border-radius: 10px; }
.list-item { display:flex; align-items:center; gap:12px; padding:12px 0; border-bottom: 1px solid rgba(15,23,42,0.06); animation: item-in 260ms cubic-bezier(.16,1,.3,1) both; transition: background .2s ease, box-shadow .2s ease; }
.list-item.editing { background: #f8fafc; border-radius: 12px; padding: 14px; border: 1px solid rgba(15,23,42,0.08); border-bottom: 0; box-shadow: none; }
.content { flex: 1; }
.actions { display: flex; gap: 8px; align-items: center; }
.edit { width: 100%; }
.item-title { font-size: 16px; font-weight: 600; color: #374151; }
.item-title.completed { text-decoration: line-through; color: #9ca3af; }
.list-item input[type="checkbox"] { margin-top: 4px; }
.checkbox-spacer { width: 16px; height: 16px; margin-left: 2px; }
.list-item .text.edit { border-color: rgba(15,23,42,.12); background: #ffffff; height: 38px; width: 85%; transition: box-shadow .2s ease, border-color .2s ease; }
.list-item.editing .text.edit { box-shadow: 0 0 0 3px rgba(110,231,240,0.18); }
.list-item .btn-success, .list-item .btn-ghost { padding: 8px 12px; height: 38px; transition: transform .12s ease, box-shadow .2s ease, background .2s ease; }
.btn, .btn-primary, .btn-success, .btn-danger, .btn-ghost { transition: transform .12s ease, box-shadow .2s ease, background .2s ease, color .2s ease; }
.btn:active, .btn-primary:active, .btn-success:active, .btn-danger:active, .btn-ghost:active { transform: translateY(1px); }

/* Keyframes */
@keyframes item-in {
  0% { opacity: 0; transform: translateY(6px); }
  100% { opacity: 1; transform: translateY(0); }
}
@keyframes card-in {
  0% { opacity: 0; transform: translateY(6px) scale(.98); }
  100% { opacity: 1; transform: translateY(0) scale(1); }
}
@keyframes underline-in {
  0% { transform: scaleX(0); opacity: 0; }
  100% { transform: scaleX(1); opacity: 1; }
}

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce) {
  * { animation-duration: 0.001ms !important; animation-iteration-count: 1 !important; transition-duration: 0.001ms !important; scroll-behavior: auto !important; }
}

/* Small screens */
@media (max-width: 520px) {
  .filters { flex-direction: column; align-items: flex-start; gap: 10px; }
}

/* --- Final layout fixes (force cross-screen behavior) --- */
html, body { height: 100%; }
body { overflow: hidden; }
.app { height: 100vh; overflow: hidden; display: flex; }
.card { display:flex; flex-direction:column; width:min(900px, 92vw);
  margin: clamp(12px,3vh,36px) auto;
  padding: clamp(18px, 2.4vw, 28px);
  border-radius:18px; border:1px solid rgba(15,23,42,0.08);
  /* High-contrast solid card with dark text tokens inside */
  background: #ffffff;
  color: #0f172a;
  --text: #0f172a;
  --muted: #6b7280;
  box-shadow: 0 20px 60px rgba(20,16,70,0.25), 0 1px 0 rgba(15,23,42,0.06);
  animation: card-in 480ms cubic-bezier(.16,1,.3,1) both;
}
/* Make the list take remaining space and be the only scroll area */
.list { flex: 1 1 auto; min-height: 140px; max-height: none; overflow-y: auto; }
.header, .add, .filters { flex: 0 0 auto; }

/* Subtasks */
.subtasks{ list-style:none; padding: 6px 0 0; margin: 0 0 2px 30px; }
.sub-item{ display:flex; align-items:center; gap:10px; padding: 6px 0; }
.sub-title{ color: var(--text); font-size: 14px; }
.sub-title.completed{ text-decoration: line-through; color: #8aa0c7; opacity: .7; }
.sub-remove{ padding: 4px 8px; border-radius: 8px; }
.sub-add{ display:flex; align-items:center; gap:8px; padding-top: 6px; }
.sub-input{ height: 34px; }
.sub-add-btn{ height: 34px; padding: 6px 12px; }
